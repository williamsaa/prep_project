

  <!-- Your webpage content goes here -->
  {% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap-datepicker.css' %}">
<script type="text/javascript" src="{% static 'js/bootstrap-datepicker.js' %}"></script>


  {% load widget_tweaks %}
  {% load bootstrap5 %}
  {% bootstrap_css %}
  {% bootstrap_javascript %}

  {% load crispy_forms_tags %}
  
  {% block content %}
 

<h4>Add / Update Address</h4>

<form method="POST" class="card p-3 mt-5 form-floating form-horizontal form-group">

  {% csrf_token %}
  {{ form.media }} 
  {{ form|crispy}}
  {{ form.your_date_field.errors }}

  <button type="submit" class="btn btn-primary" style="font-size: 20px;">Save</button> 
  <button class="btn btn-info" style="font-size: 20px;"><a href="{% url 'close_window'  %}">Cancel</a></button>  
  
  

 </form>

{% endblock %}


<script>
  $(document).ready(function() {
      $('.datepicker').datepicker();
      console.log("Document is ready. Binding event.");
      // Add an event listener to the parish select field
      $("#id_parish").on("change", function() {
          var parishId = $(this).val();
          var communitySelect = $("#id_community");
  
          // Clear current options in the community select field
          communitySelect.empty();
  
          // Make an AJAX request to fetch communities based on the selected parish
          $.ajax({
              url: "{% url 'fetch_communities' %}",  // Use the correct URL name
              data: { parish_id: parishId },
              dataType: "json",
              success: function(data) {
                  $.each(data.communities, function(index, community) {
                      // Add fetched communities as options in the community select field
                      communitySelect.append($("<option>", {
                          value: community.id,
                          text: community.name
                      }));
                  });
              }
          });
      });
  });
</script>